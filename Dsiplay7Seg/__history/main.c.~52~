#include <16f18855.h>

#fuses RSTOSC_HFINTRC
//#fuses RSTOSC_HFINTRC_32MHZ
#fuses NOEXTOSC,NOCLKOUT,NOCKS,NOFCMEN
#fuses MCLR,PUT,NOLPBOR,NOBROWNOUT,BORV24,NOZCDDIS,NOPPS1WAY,NOSTVREN,NODEBUG
#fuses WDTSW,NOWDT,WDTWIN_100%,WDTCLK_LFINTRC
#fuses NOWRT,NOSCANE,NOLVP, NOPROTECT,NOCPD

//#use delay(internal=4M)
#use delay(clock=4MHz)
#use rs232(baud=9600,parity=N,xmit=PIN_C0,rcv=PIN_C1,bits=8)

#define d1 PIN_A0
#define d2 PIN_A1
#define d3 PIN_A2
#define d4 PIN_A3
int16 contador=0;

#INT_TIMER0
void iint_timer0(){
   set_timer0(65046);
   output_toggle(d3);
   contador++;
   if (contador>9){contador=0;}
}

void main(){
   
   setup_adc(NO_ANALOGS);
   setup_adc_ports(NO_ANALOGS);
   setup_comparator(NC_NC_NC_NC);
//!   setup_adc(ADC_LEGACY_MODE|ADC_CLOCK_DIV_2|ADC_ADRES_TO_ADPREV_AT_START );
//!   setup_adc_ports(sAN4|VSS_VDD);

   setup_oscillator(OSC_HFINTRC_4MHZ|OSC_CLK_DIV_BY_1);
   setup_timer_0(T0_HFINTOSC| T0_16_BIT | T0_DIV_4096);
   set_timer0(65046);
   //set_tris_a(0x00);       ///0 es para salida,  1, es para copnfigurar entrada
   set_tris_a(0b11110000);
   set_tris_b(0x00);    //puerto b como salida
   output_b(0);
   output_a(0);
   
   ENABLE_INTERRUPTS(INT_TIMER0);
   ENABLE_INTERRUPTS(GLOBAL);
   ENABLE_INTERRUPTS(PERIPH);
   
   while(1){
      output_b(contador);
      output_high(d1);
      delay_ms(10);
   }
}
